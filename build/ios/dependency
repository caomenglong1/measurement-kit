#!/bin/sh
set -e

# TODO(bassosimone): rename this file `./script/build/ios`

if [ "$1" = "" ]; then
    echo "usage: $0 spec" 1>&2
    exit 1
fi

ROOTDIR=$(cd $(dirname $0)/../.. && pwd -P)
NEWSCRIPTDIR=$ROOTDIR/script/build

echo ""
echo "Cross-compiling $1 for all platforms and archs"

$NEWSCRIPTDIR/cross-ios iphonesimulator i386 $NEWSCRIPTDIR/$1
$NEWSCRIPTDIR/cross-ios iphonesimulator x86_64 $NEWSCRIPTDIR/$1

$NEWSCRIPTDIR/cross-ios iphoneos armv7s $NEWSCRIPTDIR/$1
$NEWSCRIPTDIR/cross-ios iphoneos arm64 $NEWSCRIPTDIR/$1
