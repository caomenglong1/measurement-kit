#!/bin/sh

# TODO(bassosimone): rename this file `./script/build/android-archive-deps`

set -e
ROOTDIR=$(cd $(dirname $0)/../.. && pwd -P)
cd $ROOTDIR/MK_DIST

# Trim down the archive by removing everything that is not a static library
# (i.e. *.a) and is not a plain C header file (i.e. *.h).
find android -type f -not -name \*.a -a -not -name \*.h -exec rm {} \;
find android -depth -type d -empty -print -exec rmdir {} \;

archive=mk-android-deps-`date +%Y%m%dT%H%M%SZ`.tar.bz2
tar -cjf $archive android
$ROOTDIR/build/sign $archive
